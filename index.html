<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Games - ABC & Friendly Play</title>
  <link rel="stylesheet" href="https://abchub-play.github.io/css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- Navbar will be auto-inserted here -->
<div id="navbar-container"></div>

<!-- Page content -->
<main class="games-container">
    <div class="games-header">
      <h1 class="games-heading">Our Games</h1>
      <p class="games-description">
        Discover our collection of fun and engaging games for all ages
      </p>
    </div>
    
    <div class="games-grid">
      <!-- Game cards will be loaded dynamically -->
      <div class="loading-indicator">Loading games...</div>
    </div>
</main>

<!-- Load navbar script -->
<script src="includes/navbar.js"></script>

<!-- Game rendering script -->
<script>
  // Function to generate star rating HTML
  function generateRatingStars(rating) {
    const fullStars = Math.floor(rating);
    const hasHalfStar = rating % 1 >= 0.5;
    const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
    
    let starsHTML = '';
    
    // Add full stars
    starsHTML += '★'.repeat(fullStars);
    
    // Add half star if needed
    if (hasHalfStar) starsHTML += '½';
    
    // Add empty stars
    starsHTML += '☆'.repeat(emptyStars);
    
    return starsHTML;
  }

  // Function to create a game card
  function createGameCard(game) {
    return `
      <div class="game-card">
        <div class="game-content-wrapper">
          <div class="game-icon-container">
            <img src="${game.icon}" alt="${game.title}" class="game-icon" loading="lazy">
            ${game.badge ? <span class="game-badge">${game.badge}</span> : ''}
          </div>
          <div class="game-info">
            <h2 class="game-title">${game.title}</h2>
            <p class="game-subtitle">${game.subtitle}</p>
            <div class="game-rating">
              ${generateRatingStars(game.rating)}
              <span class="rating-text">${game.rating}/5</span>
            </div>
          </div>
        </div>
        <div class="store-buttons">
          <a href="${game.appStoreLink}" target="_blank" rel="noopener noreferrer" class="store-btn app-store-btn">
            <img src="https://abchub-play.github.io/icons/app-store.png" alt="App Store" class="store-icon">
            <span>App Store</span>
          </a>
          <a href="${game.playStoreLink}" target="_blank" rel="noopener noreferrer" class="store-btn play-store-btn">
            <img src="https://abchub-play.github.io/icons/google-play.png" alt="Google Play" class="store-icon">
            <span>Google Play</span>
          </a>
        </div>
      </div>
    `;
  }

  // Load game data and render cards
  document.addEventListener('DOMContentLoaded', async () => {
    try {
      const response = await fetch('games.json');
      if (!response.ok) {
        throw new Error('Failed to load games data');
      }
      
      const games = await response.json();
      const gamesGrid = document.querySelector('.games-grid');
      
      if (games.length === 0) {
        gamesGrid.innerHTML = '<p class="no-games">No games available at the moment. Please check back later!</p>';
        return;
      }
      
      // Clear loading indicator
      gamesGrid.innerHTML = '';
      
      // Create and append game cards
      games.forEach(game => {
        gamesGrid.innerHTML += createGameCard(game);
      });
      
    } catch (error) {
      console.error('Error loading games:', error);
      document.querySelector('.games-grid').innerHTML = `
        <div class="error-message">
          <p>⚠️ Could not load games. Please try again later.</p>
          <button onclick="location.reload()">Retry</button>
        </div>
      `;
    }
  });
</script>
    
</body>
</html>
